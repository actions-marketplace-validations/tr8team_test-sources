import { stringToOption } from "../util";
class IoInputRetriever {
    constructor(io, validator) {
        this.#io = io;
        this.#validator = validator;
    }
    #io;
    #validator;
    retrieve() {
        const name = stringToOption(this.#io.get("name")).asOk(new Error("missing input 'name'"));
        const url = stringToOption(this.#io.get("url")).asOk(new Error("missing input 'url'"));
        const type = stringToOption(this.#io.get("type")).asOk(new Error("missing input 'type'"));
        const path = stringToOption(this.#io.get("path")).asOk(new Error("missing input 'path'"));
        return name.andThen((n) => type.andThen((t) => url.andThen((u) => path.andThen((p) => this.#validator.parse({
            name: n,
            url: u,
            type: t,
            path: p,
        })))));
    }
}
export { IoInputRetriever };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW8taW5wdXQtcmV0cmlldmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9hZGFwdGVycy9pby1pbnB1dC1yZXRyaWV2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUd6QyxNQUFNLGdCQUFnQjtJQUNwQixZQUFZLEVBQVksRUFBRSxTQUE0QjtRQUNwRCxJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztRQUNkLElBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO0lBQzlCLENBQUM7SUFFUSxHQUFHLENBQVc7SUFDZCxVQUFVLENBQW9CO0lBRXZDLFFBQVE7UUFDTixNQUFNLElBQUksR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ3BELElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQ2xDLENBQUM7UUFDRixNQUFNLEdBQUcsR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ2xELElBQUksS0FBSyxDQUFDLHFCQUFxQixDQUFDLENBQ2pDLENBQUM7UUFDRixNQUFNLElBQUksR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ3BELElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQ2xDLENBQUM7UUFDRixNQUFNLElBQUksR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ3BELElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQ2xDLENBQUM7UUFFRixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUN4QixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDakIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ2hCLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUNqQixJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQztZQUNwQixJQUFJLEVBQUUsQ0FBQztZQUNQLEdBQUcsRUFBRSxDQUFDO1lBQ04sSUFBSSxFQUFFLENBQUM7WUFDUCxJQUFJLEVBQUUsQ0FBQztTQUNSLENBQUMsQ0FDSCxDQUNGLENBQ0YsQ0FDRixDQUFDO0lBQ0osQ0FBQztDQUNGO0FBRUQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnB1dFJldHJpZXZlciB9IGZyb20gXCIuLi9pbnRlcmZhY2UvaW5wdXQtcmV0cmlldmVyXCI7XG5pbXBvcnQgeyBDb25maWcgfSBmcm9tIFwiLi4vaW5wdXRcIjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCIuLi9jb3JlL3Jlc3VsdFwiO1xuaW1wb3J0IHsgQWN0aW9uSU8gfSBmcm9tIFwiLi4vaW50ZXJmYWNlL2lvXCI7XG5pbXBvcnQgeyBzdHJpbmdUb09wdGlvbiB9IGZyb20gXCIuLi91dGlsXCI7XG5pbXBvcnQgeyBWYWxpZGF0b3IgfSBmcm9tIFwiLi4vaW50ZXJmYWNlL3ZhbGlkYXRvclwiO1xuXG5jbGFzcyBJb0lucHV0UmV0cmlldmVyIGltcGxlbWVudHMgSW5wdXRSZXRyaWV2ZXIge1xuICBjb25zdHJ1Y3RvcihpbzogQWN0aW9uSU8sIHZhbGlkYXRvcjogVmFsaWRhdG9yPENvbmZpZz4pIHtcbiAgICB0aGlzLiNpbyA9IGlvO1xuICAgIHRoaXMuI3ZhbGlkYXRvciA9IHZhbGlkYXRvcjtcbiAgfVxuXG4gIHJlYWRvbmx5ICNpbzogQWN0aW9uSU87XG4gIHJlYWRvbmx5ICN2YWxpZGF0b3I6IFZhbGlkYXRvcjxDb25maWc+O1xuXG4gIHJldHJpZXZlKCk6IFJlc3VsdDxDb25maWcsIEVycm9yPiB7XG4gICAgY29uc3QgbmFtZSA9IHN0cmluZ1RvT3B0aW9uKHRoaXMuI2lvLmdldChcIm5hbWVcIikpLmFzT2soXG4gICAgICBuZXcgRXJyb3IoXCJtaXNzaW5nIGlucHV0ICduYW1lJ1wiKVxuICAgICk7XG4gICAgY29uc3QgdXJsID0gc3RyaW5nVG9PcHRpb24odGhpcy4jaW8uZ2V0KFwidXJsXCIpKS5hc09rKFxuICAgICAgbmV3IEVycm9yKFwibWlzc2luZyBpbnB1dCAndXJsJ1wiKVxuICAgICk7XG4gICAgY29uc3QgdHlwZSA9IHN0cmluZ1RvT3B0aW9uKHRoaXMuI2lvLmdldChcInR5cGVcIikpLmFzT2soXG4gICAgICBuZXcgRXJyb3IoXCJtaXNzaW5nIGlucHV0ICd0eXBlJ1wiKVxuICAgICk7XG4gICAgY29uc3QgcGF0aCA9IHN0cmluZ1RvT3B0aW9uKHRoaXMuI2lvLmdldChcInBhdGhcIikpLmFzT2soXG4gICAgICBuZXcgRXJyb3IoXCJtaXNzaW5nIGlucHV0ICdwYXRoJ1wiKVxuICAgICk7XG5cbiAgICByZXR1cm4gbmFtZS5hbmRUaGVuKChuKSA9PlxuICAgICAgdHlwZS5hbmRUaGVuKCh0KSA9PlxuICAgICAgICB1cmwuYW5kVGhlbigodSkgPT5cbiAgICAgICAgICBwYXRoLmFuZFRoZW4oKHApID0+XG4gICAgICAgICAgICB0aGlzLiN2YWxpZGF0b3IucGFyc2Uoe1xuICAgICAgICAgICAgICBuYW1lOiBuLFxuICAgICAgICAgICAgICB1cmw6IHUsXG4gICAgICAgICAgICAgIHR5cGU6IHQsXG4gICAgICAgICAgICAgIHBhdGg6IHAsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IHsgSW9JbnB1dFJldHJpZXZlciB9O1xuIl19