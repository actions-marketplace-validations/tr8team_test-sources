class App {
    #retriever;
    #io;
    #service;
    run() {
        return this.#retriever
            .retrieve()
            .mapErr((e) => [e])
            .andThen((config) => this.#service.load(config))
            .run((output) => {
            this.#io.setObject("data", output);
        })
            .err();
    }
    constructor(retriever, io, service) {
        this.#retriever = retriever;
        this.#io = io;
        this.#service = service;
    }
}
export { App };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLQSxNQUFNLEdBQUc7SUFDUCxVQUFVLENBQWlCO0lBQzNCLEdBQUcsQ0FBVztJQUNkLFFBQVEsQ0FBa0I7SUFFMUIsR0FBRztRQUNELE9BQU8sSUFBSSxDQUFDLFVBQVU7YUFDbkIsUUFBUSxFQUFFO2FBQ1YsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ2xCLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDL0MsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7WUFDZCxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDckMsQ0FBQyxDQUFDO2FBQ0QsR0FBRyxFQUFFLENBQUM7SUFDWCxDQUFDO0lBRUQsWUFDRSxTQUF5QixFQUN6QixFQUFZLEVBQ1osT0FBd0I7UUFFeEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7UUFDNUIsSUFBSSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFDZCxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztJQUMxQixDQUFDO0NBQ0Y7QUFFRCxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcHRpb24gfSBmcm9tIFwiLi9jb3JlL29wdGlvblwiO1xuaW1wb3J0IHsgSW5wdXRSZXRyaWV2ZXIgfSBmcm9tIFwiLi9pbnRlcmZhY2UvaW5wdXQtcmV0cmlldmVyXCI7XG5pbXBvcnQgeyBBY3Rpb25JTyB9IGZyb20gXCIuL2ludGVyZmFjZS9pb1wiO1xuaW1wb3J0IHsgSUxvYWRpbmdTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xuXG5jbGFzcyBBcHAge1xuICAjcmV0cmlldmVyOiBJbnB1dFJldHJpZXZlcjtcbiAgI2lvOiBBY3Rpb25JTztcbiAgI3NlcnZpY2U6IElMb2FkaW5nU2VydmljZTtcblxuICBydW4oKTogT3B0aW9uPEVycm9yW10+IHtcbiAgICByZXR1cm4gdGhpcy4jcmV0cmlldmVyXG4gICAgICAucmV0cmlldmUoKVxuICAgICAgLm1hcEVycigoZSkgPT4gW2VdKVxuICAgICAgLmFuZFRoZW4oKGNvbmZpZykgPT4gdGhpcy4jc2VydmljZS5sb2FkKGNvbmZpZykpXG4gICAgICAucnVuKChvdXRwdXQpID0+IHtcbiAgICAgICAgdGhpcy4jaW8uc2V0T2JqZWN0KFwiZGF0YVwiLCBvdXRwdXQpO1xuICAgICAgfSlcbiAgICAgIC5lcnIoKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHJldHJpZXZlcjogSW5wdXRSZXRyaWV2ZXIsXG4gICAgaW86IEFjdGlvbklPLFxuICAgIHNlcnZpY2U6IElMb2FkaW5nU2VydmljZVxuICApIHtcbiAgICB0aGlzLiNyZXRyaWV2ZXIgPSByZXRyaWV2ZXI7XG4gICAgdGhpcy4jaW8gPSBpbztcbiAgICB0aGlzLiNzZXJ2aWNlID0gc2VydmljZTtcbiAgfVxufVxuXG5leHBvcnQgeyBBcHAgfTtcbiJdfQ==